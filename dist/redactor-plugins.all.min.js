if(!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.breadcrumb=function(){return{init:function(){var b=this;a(this.$editor).after('<p class="redactor_message_box redactor_breadcrumb" id="redactor_breadcrumb-'+this.uuid+'"><i class="icon icon-code"></i>&nbsp;<span></span></p>');var c=a("#redactor_breadcrumb-"+this.uuid);this.$editor.on("keyup.redactor-limiter",a.proxy(function(a){this.breadcrumb.handleChange(a)},this)).on("click",a.proxy(function(a){this.breadcrumb.handleChange(a)},this)).on("sync",a.proxy(function(a){this.breadcrumb.handleChange(a)},this)),this.$element.on("sourceCallback",function(a){b.opts.visual?c.show():c.hide()})},handleChange:function(b){var c=this.selection.getCurrent(),d=a("#redactor_breadcrumb-"+this.uuid),e=a(c).clone(),f=(e.find('*[data-verified="redactor"]'),e.closest("div.redactor-editor"),[]);if(a(c).parent().is("div.redactor-editor"))f.push(a(e)[0].tagName);else for(var g=a(c);a(g)[0]&&void 0!==g.parent()&&!g.is("div.redactor-editor");)f.push(a(g)[0].tagName),g=g.parent();f=f.reverse(),d.children("span").html(f.join("&nbsp;&raquo;&nbsp;"))}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.clips=function(){return{json:null,tags:[],getTemplate:function(){function b(a){return a.filter(function(a,b,c){return b===c.indexOf(a)})}var c=this,d=this.clips.json,e=a(document.createElement("section")).attr("id","redactor-modal-clips").append([a(document.createElement("select")).hide().append(a(document.createElement("option")).attr("value","").text("All")),a(document.createElement("ul")).addClass("redactor_clips_box")]);if(d&&d.length){var f=a(".clipsmodal").size(),g="clipsmodal-"+f;e.attr("id",g);c.clips.tags;a.each(d,function(d,f){var g=a('<li class="redactor_clip_item"><a href="#" class="redactor_clip_link"'+(1==f.advanced?' data-advanced="1"':"")+'></a><div class="redactor_clip" style="display:none"></div></li>');g.children("a").html(f.title),g.children(".redactor_clip").html(f.clip),f.tags&&(g.addClass(f.tags),c.clips.tags=b(a.merge(c.clips.tags,f.tags.split(" ")))),e.find(".redactor_clips_box").append(g)})}return a(e)[0].outerHTML},init:function(){if(this.opts.clipsJson){if("string"==typeof this.opts.clipsJson)try{this.clips.json=a.parseJSON(this.opts.clipsJson)}catch(a){return!1}this.clips.json||(this.clips.json=this.opts.clipsJson);var b=this.button.addAfter("link","clips","Clips");b.addClass("re-icon re-clips"),this.button.addCallback(b,this.clips.show)}},filter:function(b){if(b.trim()){b=b.trim().split(" "),a("#redactor-modal").find(".redactor_clip_item").hide();for(var c=0;c<b.length;c++){var d=b[c].trim();d&&a("#redactor-modal").find(".redactor_clip_item."+d).show()}}else a("#redactor-modal").find(".redactor_clip_item").show()},show:function(){var b=this;this.modal.addTemplate("clips",this.clips.getTemplate()),this.modal.load("clips",this.lang.get("clips")||"Clips",300),this.modal.createCancelButton(),this.selection.save(),this.modal.show();var c=b.clips.tags;if(c.length){a("#redactor-modal").find("select").show();for(var d=0;d<c.length;d++)a("#redactor-modal").find("select").append(a(document.createElement("option")).attr("value",c[d]).text(c[d]))}a("#redactor-modal").find("select").on("change",function(){b.clips.filter(a(this).find("option:selected").val().trim())}),a("#redactor-modal").find(".redactor_clips_box a").on("click",a.proxy(this.clips.clipClicked,this))},clipClicked:function(b){this.clips.insertClip(a(b.target).next().html(),void 0!==a(b.target).data("advanced"))},insertClip:function(a,b){this.selection.restore(),this.clean.isSingleLine(a),b?this.insert.htmlWithoutClean(a):this.insert.html(a,!0),this.modal.close(),this.observe.load()}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.contrast=function(){return{init:function(){a.extend(this.opts.shortcuts,{f5:{func:"contrast.toggle",params:[]}})},toggle:function(){this.$editor.toggleClass("redactor-editor_contrast")}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){a.fn.animateRotate=function(b,c,d,e,f){var g=a.speed(c,d,f),h=g.step;return this.each(function(c,d){g.complete=a.proxy(g.complete,d),g.step=function(b){if(a.style(d,"transform","rotate("+b+"deg)"),h)return h.apply(d,arguments)},a({deg:e}).animate({deg:b},g)})},RedactorPlugins.counter=function(){return{init:function(){function b(b){var d=0,e=0,f=b.code.get(),g=f.replace(/<\/(.*?)>/gi," ");if(g=g.replace(/<(.*?)>/gi,""),g=g.replace(/\t/gi,""),g=g.replace(/\n/gi,""),g=g.replace(/\r/gi,""),""!==(g=a.trim(g))){var h=g.split(/\s+/),i=g.match(/\s/g);h&&h.length,i&&(e=i.length),d=g.length}var j=b.opts.counterWPM||275,k=a(b.$editor).text().trim().split(/\s+/g).length,l=j/60,m=k/l,n=c(1e3*m),o="Estimated Read Time: ";n.hours&&(o+=n.hours.toString()+" "+(n.hours>1?"Hours ":"Hour ")),o+=n.minutes.toString()+" "+(n.minutes>1?"Minutes ":"Minute "),o+=n.seconds.toString()+" "+(n.seconds>1?"Seconds ":"Second ");var p=a(b.$editor).parent().children(".redactor_counter");p.find(".reading-time").text((n.hours?n.hours+":":"")+(n.minutes.toString().length<2?"0"+n.minutes.toString():n.minutes)+":"+(n.seconds.toString().length<2?"0"+n.seconds.toString():n.seconds)).parent().attr("title",o),p.find(".word-count").text(k.toLocaleString()+" words").parent().attr("title",d.toLocaleString()+" characters ("+Number(d-e).toLocaleString()+" non-space)");var q=m/3600*360;p.find(".icon-power-off").data("deg",q).animateRotate(q,180,"linear",p.find(".icon-power-off").data("deg"))}function c(a){var b,c,d,e,f;return b=a/1e3,c=Math.round(b%60),b/=60,d=Math.round(b%60),b/=60,e=Math.round(b%24),b/=24,f=Math.round(b),{days:f,hours:e,minutes:d,seconds:c}}a(this.$editor).after('<p class="redactor_counter" id="redactor_counter-'+this.uuid+'"><span class="time-wrap"><i class="icon icon-power-off"></i>&nbsp;<span class="reading-time"></span></span>&emsp;&emsp;<span class="word-count-wrap"><i class="icon icon-keyboard-o"></i>&nbsp;<span class="word-count"></span></span></p>');var d=a("#redactor_counter-"+this.uuid);this.$editor.on("keyup.redactor-limiter",a.proxy(function(a){b(this)},this));var e=this;this.$element.on("sourceCallback",function(a){e.opts.visual?d.show():d.hide()}),b(this)}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.download=function(){return{init:function(){var a=this.button.add("download","Download");this.button.setAwesome("download","icon icon-download"),this.button.addCallback(a,this.download.download)},download:function(){a('<a target="_blank" download="content.html" href="data:text/html,'+encodeURI(this.code.get())+'"></a>').get(0).click()}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.imagepx=function(){return{init:function(){var b=this;this.modal.addCallback("imageEdit",a.proxy(this.imagepx.imageEdit,this)),!1!==b.opts.showDimensionsOnResize&&b.$element.on("moveResizeCallback",function(b,c){var d=c.el.el.parent(),e=c.w+"x"+c.h;d.find(".dimensions")[0]?d.find(".dimensions").html(e):d.append(function(){var b=a('<p class="dimensions" />');return b.html(e),b}())})},imageEdit:function(){function b(b){g.val()?(l.width(g.val()),k=!0):l.width(""),h.val()?(l.height(h.val()),k=!0):l.height(""),k&&!o&&a(".redactor-modal-close-btn")[0]&&(o=!0),b?(a("#redactor-modal-overlay").addClass("preview"),a("#redactor-modal").css({background:"rgba(255,255,255,0.667)"}).find("#redactor-modal-image-edit").css({background:"transparent"}),a("#redactor-modal-overlay").css({backgroundImage:"url("+l.attr("src")+")",backgroundSize:(g.val()?a.isNumeric(g.val())?g.val()+"px":g.val():"auto")+" "+(h.val()?a.isNumeric(h.val())?h.val()+"px":h.val():"auto")})):(a("#redactor-modal-overlay").removeClass("preview"),a("#redactor-modal").css({background:f[0]}).find("#redactor-modal-image-edit").css({background:f[1]}),a("#redactor-modal-overlay").css({backgroundImage:"",backgroundSize:""}))}function c(){_t=m.clone(),l.replaceWith(_t),l=null,l=_t,l.attr("style",n).css({opacity:""}),d.code.sync(),d.observe.load()}var d=this,e=a("#redactor-modal-body > section").append(document.createElement("hr")).append(a(document.createElement("div")).addClass("image-edit-dimensions")).find(".image-edit-dimensions"),f=[a("#redactor-modal").css("background"),a("#redactor-modal-image-edit").css("background")],g=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","x").attr("name","redactor-imageEdit-image-width").attr("id","redactor-imageEdit-image-width"),h=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","y").attr("name","redactor-imageEdit-image-height").attr("id","redactor-imageEdit-image-height"),i=a(document.createElement("input")).attr("disabled","disabled").attr("type","checkbox").attr("id","redactor-imageEdit-image-preview"),j=a(document.createElement("label")).attr("for","redactor-imageEdit-image-preview").text(this.opts.curLang.previewDimensions||"Preview Dimensions");j.prepend(i),e.append([a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-width").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-width").text(this.opts.curLang.width||"Width"),g),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-height").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-height").text(this.opts.curLang.height||"Height"),h),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-preview").append(j)]);var k,l=a("#redactor-image-box").children("img"),m=(l.parent(),l.clone().css("opacity","")),n=l.attr("style")||"",o=(a("#image-edit-dimensions").addClass("scalable"),!1),p=l.prop("style");p&&(p.width&&g.val(p.width),p.height&&h.val(p.height)),a.each([g,h],function(c,d){a(this).on("change keyup",function(a){g.val()||h.val()?i.removeAttr("disabled"):i.attr("disabled","disabled"),b(i.is(":checked"))})}),i.on("change",function(c){b(a(this).is(":checked"))}),d.$modalClose.on("click.redactor-modal",a.proxy(function(){c()},this)),a("#redactor-modal").click(function(b){a(b.target).hasClass("redactor-modal-close-btn")&&c()})}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.imageurl=function(){return{init:function(){this.$element.on("modalOpenedCallback",a.proxy(this.imageurl.load,this))},load:function(){var b=this;a("#redactor-modal-image-insert").length&&(b.modal.addTab("image-url","Image URL","active"),a('#redactor-modal-tabber a[rel="tabimage-url"]').click(function(b){a("#redactor-modal").removeClass("expanded eureka-modal"),a("#eureka-modal-footer").hide()}),a("#redactor-modal-image-insert").append(a(document.createElement("form")).attr("id","insert-image-form").addClass("redactor-tab redactor-tabimage-url").hide().append([a('<label for="image-url" class="redactor-image-link-option">').html("Image URL"),a('<input type="url" name="image-url" id="image-url-input" placeholder="Absolute URL to Image">'),a('<footer id="insert-image-footer">').html(a('<button id="insert-url-btn" type="submit">').addClass("redactor-modal-btn redactor-modal-action-btn").html("Insert"))])),a("#insert-image-form").submit(function(c){c.preventDefault(),b.image.insert({filelink:a("#image-url-input").val()}),b.image.onDrop(),b.modal.close(),b.selection.restore()}))}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.norphan=function(){return{init:function(){if(void 0===this.opts.syncBeforeCallback&&this.opts.tabifier){var b=this;b.opts.syncBeforeCallback=function(c){var d=a(document.createElement("div"));return d.html(c),d.find("div,p,h1,h2,h3,h4,h5,h6,blockquote,dd,dt,figcaption").each(function(){a(this).replaceWith(b.norphan.adopt(a(this).get(0).outerHTML))}),b.tabifier.get(d.html())}}},adopt:function(a){for(var b="",c=String(a).reverse().split(""),d=!1,e=!1,f=0;f<c.length;f++)">"==c[f]?_ignore=!0:"<"==c[f]?(_ignore=!1,e=!0):c[f].trim().length>0&&(e=!1),_ignore||d||" "!=c[f]||e?b+=c[f]:(b+=String("&nbsp;").reverse(),d=!0);return b.reverse()}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.replacer=function(){return{getTemplate:function(){return String()+'<section id="redactor-modal-replacer"><p>Search and replace found text.</p><label>Search</label><input type="text" size="5" value="2" id="redactor-replacer-find" required /><label>Replace</label><input type="text" size="5" value="3" id="redactor-replacer-replace" required /><div class="options"><div class="ignore-case"><label>Ignore Case</label><input type="checkbox" id="redactor-replacer-ignore-case" /></div></div></section>'},init:function(){a.extend(this.opts.shortcuts,{"ctrl+f":{func:"replacer.show",params:[]}})},show:function(){this.modal.addTemplate("replacer",this.replacer.getTemplate()),this.modal.load("replacer",this.lang.get("replacer")||"Replacer",300),this.modal.createCancelButton(),this.modal.createActionButton("Replace").on("click",this.replacer.replace),this.sel&&this.sel.toString()&&(a("#redactor-replacer-find").val(this.sel.toString()),a("#redactor-replacer-replace").focus()),this.selection.save(),this.modal.show(),a("#redactor-modal-replacer").focus()},replace:function(){function b(a,b,d,e){return d.replace(a instanceof RegExp?a:new RegExp(c(a),e),b)}function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var d=a("#redactor-replacer-find").val(),e=a("#redactor-replacer-replace").val(),f=a("#redactor-replacer-ignore-case").is(":checked");d&&e&&this.insert.set(b(d,e,this.$editor.html(),"g"+(f?"i":""))),this.modal.close(),this.selection.restore()}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){var b=!1;a(window).keydown(function(a){18==a.which&&(b=!0)}).keyup(function(a){18==a.which&&(b=!1)}),RedactorPlugins.speek=function(){var c,d=window.speechSynthesis.getVoices();return window.speechSynthesis.onvoiceschanged=function(a){d=window.speechSynthesis.getVoices()},{getTemplate:function(){var b=a(document.createElement("section"));b.attr("id","redactor-modal-speek"),b.append("<p>Listen as you wish.</p>"),b.append('<label for="voice">Voice</label>'),b.append(document.createElement("select")),a.each(d,function(c,d){b.find("select").attr("id","voice").attr("name","voice").append(a('<option value="'+d.name+'">'+d.name+"</option>"))});var c=a('<div class="options"></div>');return c.append('<label for="volume">Volume</label><input data-varname="speechVolume" type="range" min="0" max="1" step="0.1" name="volume" id="volume" value="1">'),c.append('<label for="rate">Rate</label><input data-varname="speechRate" type="range" min="0" max="1" step="0.1" name="Rate" id="rate" value="1">'),c.append('<label for="pitch">Pitch</label><input data-varname="speechPitch" type="range" min="0" max="1" step="0.1" name="pitch" id="pitch" value="1">'),b.append(c),a(b)[0].outerHTML},init:function(){if(!(!1 in window)){var b=this,c=this.button.add("speek","Listen");this.button.setAwesome("speek","icon icon-headphones"),this.button.addCallback(c,this.speek.clicked),a.extend(this.opts.shortcuts,{esc:{func:"speek.shutup",params:[]}}),this.$element.on("modalClosedCallback",function(){b.speek.shutup()})}},clicked:function(){if(b)return void this.speek.show();this.speek.speek()},speek:function(){var b=window.speechSynthesis.speaking;this.speek.shutup();var e=this.button.get("speek"),f=this.opts.speechVoice||"Vicki";if(!b){var g=this.code.get(),h=[];a(g).each(function(b,c){h.push(a(c).text())}),g=h.join(" "),c=new SpeechSynthesisUtterance,c.text=g,c.lang=this.opts.speechLang||"en-US",c.voice=d.filter(function(a){return a.name==f})[0],c.rate=void 0!==this.opts.speechRate?this.opts.speechRate:1,c.pitch=void 0!==this.opts.speechPitch?this.opts.speechPitch:1,c.volume=void 0!==this.opts.speechVolume?this.opts.speechVolume:1,c.onend=c.onerror=function(){e.removeClass("speaking")},c.onstart=c.onresume=function(){e.addClass("speaking")},window.speechSynthesis.speak(c),e.addClass("speaking")}},show:function(){var b=this.button.get("speek"),c=this;this.modal.addTemplate("choose-voice",this.speek.getTemplate()),this.modal.load("choose-voice",this.lang.get("choose-voice")||"Choose Voice",300),this.modal.createCancelButton();var b=this.modal.createActionButton("Listen");b.on("click",this.speek.close),a("#redactor-modal-speek select").on("change",function(){var b=a(this).val();c.speek.vocalChange(b)}),a("#redactor-modal-speek select").val(c.opts.speechVoice),a("#redactor-modal-speek #volume, #redactor-modal-speek #rate, #redactor-modal-speek #pitch").each(function(){a(this).on("change",function(){b=c.button.get("speek"),c.opts[a(this).data("varname")]=a(this).val(),c.speek.shutup(),c.speek.speek(),b.addClass("speaking")}).val(c.opts[a(this).data("varname")])}),this.selection.save(),this.modal.show()},close:function(){this.modal.close(),this.speek.shutup(),this.speek.speek(),this.selection.restore()},vocalChange:function(a){var b=this.button.get("speek"),c=d.filter(function(b){return b.name==a})[0];c&&(this.opts.speechVoice=c.name,this.speek.shutup(),this.speek.speek(),b.addClass("speaking"))},shutup:function(){var a=!!window.speechSynthesis.speaking;window.speechSynthesis.cancel();var b=this.button.get("speek");if(c)try{c.cancel()}catch(a){}return window.speechSynthesis.cancel(),c=null,b.removeClass("speaking"),a}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){var b=!1;RedactorPlugins.syntax=function(){return{init:function(){var c=this;void 0===c.opts.aceLoaded&&(c.opts.aceLoaded=!1),c.opts.aceLoaded||("undefined"==typeof ace?(b=!0,a.getScript(c.opts.aceOfflineSource,function(){c.syntax.handleLoaded()})):c.syntax.handleLoaded())},handleLoaded:function(){var c=this;c.$textarea.after('<div class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>');var d=c.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+c.uuid);b&&(ace.config.set("modePath",c.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",c.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",c.opts.assetsUrl+"lib/ace/"));var e=ace.edit("redactor__modx-code-pretty-content"+c.uuid);e.setTheme(c.opts.aceTheme||"ace/theme/chrome"),e.getSession().setMode(c.opts.aceMode||"ace/mode/html"),e.getSession().setUseWorker(c.opts.useWorkers||!1),e.setValue(c.tabifier.get(c.$textarea.val())),void 0!==c.opts.aceUseSoftTabs&&e.getSession().setUseSoftTabs(c.opts.aceUseSoftTabs),void 0!==c.opts.aceTabSize&&parseInt(c.opts.aceTabSize)&&e.getSession().setTabSize(parseInt(c.opts.aceTabSize)),void 0!==c.opts.aceUseWrapMode&&e.getSession().setUseWrapMode(c.opts.aceUseWrapMode),void 0!==c.opts.aceHighlightActiveLine&&e.setHighlightActiveLine(c.opts.aceHighlightActiveLine),void 0!==c.opts.aceReadOnly&&e.setReadOnly(c.opts.aceReadOnly);c.$textarea;c.$element.on("sourceCallback",function(a){var b=c.$textarea.height();c.$textarea.hide(),e.setValue(c.tabifier.get(c.$textarea.val())),d.show().height(b),e.resize()});var f=a(document.getElementById("redactor__modx-code-pretty-content"+c.uuid));c.$element.on("visualCallback",function(a){c.insert.set(e.getValue(),!1),f.hide()}),e.on("change",function(a){c.$textarea.val(e.getValue())}),void 0!==c.opts.aceFontSize&&f.css({fontSize:c.opts.aceFontSize}),c.opts.aceLoaded=!0}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(function(a){RedactorPlugins.wym=function(){return{init:function(){this.$editor.addClass("redactor-editor_wym")}}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};!function(a){RedactorPlugins.zoom=function(){return{init:function(){void 0===this.opts.zoomLevel&&(this.opts.zoomLevel=0),a.extend(this.opts.shortcuts,{"ctrl+=":{func:"zoom.zoom",params:[1]},"ctrl+-":{func:"zoom.zoom",params:[-1]}})},zoom:function(a){this.opts.zoomLevel+=a,this.opts.zoomLevel=Math.min(3,this.opts.zoomLevel),this.opts.zoomLevel=Math.max(0,this.opts.zoomLevel),this.$editor.addClass("redactor-editor__zoom").removeClass("redactor-editor__zoom-0").removeClass("redactor-editor__zoom-1").removeClass("redactor-editor__zoom-2").removeClass("redactor-editor__zoom-3").addClass("redactor-editor__zoom-"+this.opts.zoomLevel)}}}}(jQuery);