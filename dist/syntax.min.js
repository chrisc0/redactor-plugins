!function(a){a.Redactor.prototype.syntax=function(){return{offlineMode:!1,editor:null,editorDOM:null,prettyContent:null,init:function(){var b=this;void 0===b.opts.aceLoaded&&(b.opts.aceLoaded=!1),b.opts.aceLoaded||(this.opts=a.extend({aceUseSoftTabs:!0,aceTabSize:4,aceUseWrapMode:!0,aceHighlightActiveLine:!0,aceReadOnly:!1,aceTheme:"ace/theme/chrome",aceMode:"ace/mode/html"},this.opts),"undefined"==typeof ace?(b.syntax.offlineMode=!0,a.getScript(b.opts.aceOfflineSource,function(){b.syntax.handleLoaded()})):b.syntax.handleLoaded())},handleLoaded:function(){var b=this,c=b.$textarea;b.$textarea.after('<div hidden="true" class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>'),b.syntax.prettyContent=b.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+b.uuid),b.syntax.editorDOM=a(document.getElementById("redactor__modx-code-pretty-content"+b.uuid)),b.syntax.offlineMode&&b.opts.aceOfflineSource&&(ace.config.set("modePath",b.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",b.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",b.opts.assetsUrl+"lib/ace/")),b.syntax.editor=ace.edit("redactor__modx-code-pretty-content"+b.uuid);var d=b.syntax.editor;d.setTheme(b.opts.aceTheme),d.getSession().setMode(b.opts.aceMode),d.getSession().setUseWorker(void 0===b.opts.useWorkers?b.opts.useWorkers:!1),d.setValue(c.val()),void 0!==b.opts.aceUseSoftTabs&&d.getSession().setUseSoftTabs(b.opts.aceUseSoftTabs),void 0!==b.opts.aceTabSize&&parseInt(b.opts.aceTabSize)&&d.getSession().setTabSize(parseInt(b.opts.aceTabSize)),void 0!==b.opts.aceUseWrapMode&&d.getSession().setUseWrapMode(b.opts.aceUseWrapMode),void 0!==b.opts.aceHighlightActiveLine&&d.setHighlightActiveLine(b.opts.aceHighlightActiveLine),void 0!==b.opts.aceReadOnly&&d.setReadOnly(b.opts.aceReadOnly);var e=b.button.get("html");b.button.addCallback(e,b.syntax.sourceCallback),d.on("change",function(a){b.source.$textarea.val(d.getValue())}),void 0!==b.opts.aceFontSize&&b.syntax.editorDOM.css({fontSize:b.opts.aceFontSize}),b.opts.aceLoaded=!0},sourceCallback:function(a,b){var c=this,d=c.syntax.editor,e=c.syntax.editorDOM.attr("hidden");if("undefined"!=typeof e&&e!==!1){var f=c.source.$textarea.height();c.source.$textarea.hide(),d.setValue(c.source.$textarea.val()),c.syntax.prettyContent.removeAttr("hidden").show().height(f),d.resize()}else c.insert.set(d.getValue(),!1),c.syntax.editorDOM.hide(),c.syntax.prettyContent.attr("hidden","true")}}}}(jQuery);